<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:ViewModels="clr-namespace:SudokuSolverApp.ViewModels"
             x:Class="SudokuSolverApp.Views.ManualInPage"
             Title="Type Sudoku manually"
             x:DataType="ViewModels:ManualInViewModel"
             x:Name="cp">
    
    <ContentPage.ToolbarItems>
        <!--StyleId="Item1"-->
        <ToolbarItem Order="Secondary"
                     Text="Erase board"
                     Clicked="EraseBoardBttn_Clicked"/>
        
        <!--StyleId="Item2"-->
        <ToolbarItem Order="Secondary"
                     Text="Save board"/>
        
    </ContentPage.ToolbarItems>

    <ScrollView>
        <Grid
            x:Name="PageGrid"
            ColumnDefinitions="*"
            RowDefinitions="*">


            <Grid RowDefinitions="*, Auto"
                  Padding="16">
                
                <VerticalStackLayout Spacing="10">
                    
                    <Grid
                        ColumnDefinitions="*"
                        RowDefinitions="*">

                        <Grid x:Name="MatrixGrid"
                              ColumnDefinitions="*, *, *, 2, *, *, *, 2, *, *, *"
                              RowDefinitions="*, *, *, 2, *, *, *, 2, *, *, *"
                              HorizontalOptions="FillAndExpand"
                              VerticalOptions="FillAndExpand"
                              BindingContext="{Binding Matrix}"
                              Padding="2">

                            <BoxView Grid.Row="3"
                                     HeightRequest="2"
                                     Grid.ColumnSpan="11"
                                     Color="Black"/>

                            <BoxView Grid.Row="7"
                                     HeightRequest="2"
                                     Grid.ColumnSpan="11"
                                     Color="Black"/>

                            <BoxView Grid.Column="3"
                                     WidthRequest="2"
                                     Grid.RowSpan="11"
                                     Color="Black"
                                     VerticalOptions="FillAndExpand"/>

                            <BoxView Grid.Column="7"
                                     WidthRequest="2"
                                     Grid.RowSpan="11"
                                     VerticalOptions="FillAndExpand"
                                     Color="Black"/>

                        </Grid>

                        <Border Stroke="{Binding BackgroundColor, Source={x:Reference cp}}"
                                StrokeThickness="2"/>
                        
                        <Border Stroke="Black"
                                StrokeThickness="2"
                                StrokeShape="RoundRectangle 8"/>

                    </Grid>

                <Grid x:Name="NumbersGrid"
                    ColumnDefinitions="*, *, *, *, *, *, *, *, *"
                    RowDefinitions="*"
                    ColumnSpacing="2">
                </Grid>

                </VerticalStackLayout>
                
                <Button Grid.Row="1"
                        Text="Solve!"
                        Clicked="Solve_Clicked"
                        Command="{Binding SolveCommand}"/>
                
            </Grid>
            
            <Rectangle x:Name="LoadingBack"
                       HorizontalOptions="FillAndExpand"
                       VerticalOptions="FillAndExpand"
                       BackgroundColor="Transparent"/>
            
            <ActivityIndicator IsRunning="False"
                               x:Name="LoadingIndicator"
                               WidthRequest="100"/>
        </Grid>
    </ScrollView>
</ContentPage>